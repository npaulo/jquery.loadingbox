(function(e){function r(i){function u(e,t){return e+t-1}var s=i&&i.options&&i.options.sync||false;var o=i&&i.el||null;if(arguments.length===4){this.x1=arguments[0];this.y1=arguments[1];this.x2=u(arguments[0],arguments[2]);this.y2=u(arguments[1],arguments[3])}else{if(o){var f=o.offset().left,l=o.offset().top,h=o.width(),p=o.height();var d=f,v=l,m=h,g=p;if(i.options){if(i.options.usePosition){f=o.position().left;l=o.position().top}if(i.options.marginsEnable){var y=parseInt(o.css("margin-top")||"0"),w=parseInt(o.css("margin-bottom")||"0"),E=parseInt(o.css("margin-left")||"0"),S=parseInt(o.css("margin-right")||"0");d=d-E;v=v-y;m=m+E+S;g=g+y+w}if(i.options.paddingsEnable){var x=parseInt(o.css("padding-top")||"0"),T=parseInt(o.css("padding-bottom")||"0"),N=parseInt(o.css("padding-left")||"0"),C=parseInt(o.css("padding-right")||"0");d=d-N;v=v-x;m=m+N+C;g=g+x+T}if(i.options.bordersEnable){var k=parseInt(o.css("border-top-width")||"0"),L=parseInt(o.css("border-bottom-width")||"0"),A=parseInt(o.css("border-left-width")||"0"),O=parseInt(o.css("border-right-width")||"0");d=d-A;v=v-k;m=m+A+O;g=g+k+L}}this.x1=d;this.y1=v;this.x2=u(d,m);this.y2=u(v,g);this.el=o}else{if(i&&!n(i.x1)&&!n(i.x2)&&!n(i.y1)&&!n(i.y2)){this.x1=i.x1;this.y1=i.y1;this.x2=i.x2;this.y2=i.y2}else{this.x1=0;this.y1=0;this.x2=-1;this.y2=-1}}}this.clone=function(){return new r({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2})};this.isNull=function(){return this.x2==this.x1-1&&this.y2==this.y1-1};this.isEmpty=function(){return this.x1>this.x2||this.y1>this.y2};this.isValid=function(){return this.x1<=this.x2&&this.y1<=this.y2};this.left=function(){return this.x1};this.top=function(){return this.y1};this.right=function(){return this.x2};this.bottom=function(){return this.y2};this.setLeft=function(e){this.x1=e;this.sync();return this};this.setTop=function(e){this.y1=e;this.sync();return this};this.setRight=function(e){this.x2=e;this.sync();return this};this.setBottom=function(e){this.y2=e;this.sync();return this};this.setWidth=function(e){this.x2=u(this.x1,e);this.sync();return this};this.setHeight=function(e){this.y2=u(this.y1,e);this.sync();return this};this.width=function(){return this.x2-this.x1+1};this.height=function(){return this.y2-this.y1+1};this.size=function(){return{width:this.width(),height:this.height()}};this.scale=function(e,n,r){if(r==t.None){return this}if(r===t.IgnoreAspectRatio||e===0||n===0){this.setWidth(e);this.setHeight(n);this.sync();return this}var i=this.width();var s=this.height();if(r==t.AutoDetect){if(i>e&&s>n){r=t.KeepAspectRatioByExpanding}else{if(i>e||s>n){r=t.KeepAspectRatio}else{r=t.None;return this}}}var o=false;var u=n*i/s;if(r==t.KeepAspectRatio){o=u<=e}else{o=u>=e}if(o){this.setWidth(u);this.setHeight(n)}else{this.setHeight(e*s/i);this.setWidth(e)}this.sync();return this};this.topLeft=function(){return{x:this.x1,y:this.y1}};this.bottomRight=function(){return{x:this.x2,y:this.y2}};this.topRight=function(){return{x:this.x2,y:this.y1}};this.bottomLeft=function(){return{x:this.x1,y:this.y2}};this.center=function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}};this.moveLeft=function(e){this.x2+=e-this.x1;this.x1=e;this.sync();return this};this.moveTop=function(e){this.y2+=e-this.y1;this.y1=e;this.sync();return this};this.moveRight=function(e){this.x1+=e-this.x2;this.x2=e;this.sync();return this};this.moveBottom=function(e){this.y1+=e-this.y2;this.y2=e;this.sync();return this};this.moveTopLeft=function(e){this.moveLeft(e.x);this.moveTop(e.y);this.sync();return this};this.moveBottomRight=function(e){this.moveRight(e.x);this.moveBottom(e.y);this.sync();return this};this.moveTopRight=function(e){this.moveRight(e.x);this.moveTop(e.y);this.sync();return this};this.moveBottomLeft=function(e){this.moveLeft(e.x);this.moveBottom(e.y);this.sync();return this};this.moveCenter=function(e){var t=this.x2-this.x1;var n=this.y2-this.y1;this.x1=e.x-t/2;this.y1=e.y-n/2;this.x2=this.x1+t;this.y2=this.y1+n;this.sync();return this};this.united=function(e){if(this.isNull()){return e}if(e.isNull()){return this}var t=this.x1;var n=this.x1;if(this.x2-this.x1+1<0){t=this.x2}else{n=this.x2}var i=e.x1;var s=e.x1;if(e.x2-e.x1+1<0){i=e.x2}else{s=e.x2}var o=this.y1;var u=this.y1;if(this.y2-this.y1+1<0){o=this.y2}else{u=this.y2}var a=e.y1;var f=e.y1;if(e.y2-e.y1+1<0){a=e.y2}else{f=e.y2}var l=new r({x1:Math.min(t,i),x2:Math.max(n,s),y1:Math.min(o,a),y2:Math.max(u,f)});return l};this.toString=function(){return"Rect(x:"+this.left()+" y:"+this.top()+" width:"+this.width()+" height:"+this.height()+")"};this.debug=function(t){var n=e("<div>").appendTo("body");n.css({position:"absolute",top:this.top()+"px",left:this.left()+"px",width:this.width()-1+"px",height:this.height()-1+"px",border:"1px solid "+t,zIndex:"99999999999999"});return n};this.toCss=function(){return{top:this.top()+"px",left:this.left()+"px",width:this.width()+"px",height:this.height()+"px"}};this.sync=function(){if(s&&o){o.offset({top:this.top(),left:this.left()}).css({position:"absolute",width:this.width(),height:this.height()})}}}var t={None:"none",IgnoreAspectRatio:"ignoreAspectRatio",KeepAspectRatio:"keepAspectRatio",KeepAspectRatioByExpanding:"keepAspectRatioByExpanding",AutoDetect:"autoDetect"};var n=function(e){return e===void 0};var i={init:function(t){var n={marginsEnable:true,paddingsEnable:false,bordersEnable:false};e.extend(n,t);var i=e(this);if(i.length==0){return new r}if(i.length==1){return new r({el:e(this),options:n})}var s=new r;this.each(function(){var t=new r({el:e(this),options:n});if(!t.isEmpty()){s=s.united(t)}});return s}};e.fn.rect=function(t){if(i[t]){return i[t].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof t==="object"||!t){return i.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.rect")}}};e.fn.rect.RectClass=r;e.fn.rect.ScaleMode=t})(jQuery);(function(e){function t(t,n){var r={top:0,left:0,position:"fixed"};var i={width:"100%",height:"100%"};var s=e('<div class="loadingBox fade">').css(r).css(i);var o=e('<div class="background">').css(r).css(i);var u=null;if(n){u=e('<div class="message">').css({position:"fixed",top:"50%",width:"100%",textAlign:"center"}).text(n)}e("<img>").load(function(){var t=this.width/2,r=this.height/2;if(n){u.css({marginTop:r+5+"px"})}var i=e(this).css({marginLeft:-t+"px",marginTop:-r+"px",top:"50%",left:"50%",position:"fixed"});s.append(i)}).attr("src",t);s.append(o);s.append(u);s.appendTo(e("body"));setTimeout(function(){s.addClass("in")},200);return s}function n(t,n,r){var i=e(this);var s={position:"absolute"};var o=t.toCss();o=e.extend({},o,{top:0,left:0});var u=e('<div class="loadingBox fade">').css(s).css(o);var a=e('<div class="background white">').css(s).css(o);var f=null;if(r){f=e('<div class="text-bold">').css({position:"absolute",top:"50%",width:"100%",textAlign:"center"}).text(r)}e("<img>").load(function(){var n=this.height/2;if(r){f.css({marginTop:n+5+"px"})}var i=new e.fn.rect.RectClass(0,0,this.width,this.height);t.moveTop(0);t.moveLeft(0);i.moveCenter(t.center());var o=e(this).css(s).css(i.toCss());u.append(o)}).attr("src",n);u.data("loadingBox",{el:i,originalPosition:i.css("position"),originalMinHeight:i.css("min-height")});i.data("loadingBox",{wrapperEl:u,originalPosition:i.css("position"),originalMinHeight:i.css("min-height")});i.css("position","relative");u.append(a);u.append(f);u.appendTo(i);setTimeout(function(){u.addClass("in")},200);return u}var r={init:function(r){var i={fullscrrenLoadingImgUrl:"imgs/loading-fullscreen.gif",loadingImgUrl:"imgs/loading.gif",message:"",boundingRect:null};var s=e(this);i=e.extend(i,r);if(e(this).length){if(!i.boundingRect){if(s.width()>0&&s.height()<40){s.css("min-height","40px")}i.boundingRect=e(this).rect()}return n.apply(this,[i.boundingRect,i.loadingImgUrl,i.message])}return t(i.fullscrrenLoadingImgUrl,i.message)},destroy:function(){var t=e(this);var n=t;var r=t.data("loadingBox");if(r){if(r.wrapperEl){n=r.wrapperEl}else if(r.el){t=r.el;n=e(this)}t.css({position:"","min-height":r.originalMinHeight});n.remove()}else{this.remove()}}};e.fn.loadingBox=function(t){if(r[t]){return r[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return r.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.loadingBox")}}})(jQuery)